import e,{useState as t,useEffect as n,useMemo as r,useCallback as i,useContext as o,useRef as a}from"react";import l from"prop-types";import{Button as c,Card as s,CardBody as u,CardFooter as d,CardHeader as f,Dropdown as p,DropdownToggle as g,DropdownMenu as m,DropdownItem as h,Table as v,Row as y,Col as b,InputGroup as S,Input as C}from"reactstrap";import N from"classnames";import{jsxs as T,jsx as k,Fragment as w}from"react/jsx-runtime";import{useTable as E,useSortBy as P,useExpanded as I,usePagination as x,useResizeColumns as F,useFlexLayout as O}from"react-table";import R from"react-select";import{Modifier as D,EditorState as z,CompositeDecorator as L,ContentState as j,convertFromRaw as A,convertToRaw as M,RichUtils as B,AtomicBlockUtils as U,SelectionState as K,Editor as _}from"draft-js";import q from"assets/img/default-avatar.png";function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}function H(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function Y(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(i[n]=e[n]);return i}Object.assign({leftIcon:"",rightIcon:""},c.prototype.props);var J=function(e){/*#__PURE__*/return T(c,G({},e,{children:[e.leftIcon?/*#__PURE__*/k("i",{className:N(e.leftIcon,"me-2")}):null,e.children,e.rightIcon?/*#__PURE__*/k("i",{className:N(e.rightIcon,"ms-2")}):null]}))};J.propTypes=G({leftIcon:l.string,rightIcon:l.string},c.propTypes&&c.propTypes),Object.assign({},s.prototype.props);var V=function(e){/*#__PURE__*/return k(s,G({},e,{children:e.children}))};V.propTypes=G({},s.propTypes&&s.propTypes),Object.assign({},u.prototype.props);var W=function(e){/*#__PURE__*/return k(u,G({},e,{children:e.children}))};W.propTypes=G({},u.propTypes&&u.propTypes),Object.assign({},d.prototype.props);var Z=function(e){/*#__PURE__*/return k(d,G({},e,{children:e.children}))};Z.propTypes=G({},d.propTypes&&d.propTypes),Object.assign({},f.prototype.props);var X=function(e){/*#__PURE__*/return k(f,G({},e,{children:e.children}))};X.propTypes=G({},f.propTypes&&f.propTypes),Object.assign({},p.prototype.props);var Q=function(e){var t=G({},(H(e),e));/*#__PURE__*/return k(p,G({},t,{children:t.children}))};Q.propTypes=G({},p.propTypes&&p.propTypes);var $=["caret"];Object.assign({startIcon:"",endIcon:"",caret:!0},g.prototype.props);var ee=function(e){var t=Y(e,$);/*#__PURE__*/return k(w,{children:/*#__PURE__*/T(g,G({caret:!t.startIcon&&!t.endIcon&&t.caret},t,{children:[t.startIcon&&/*#__PURE__*/k("i",{className:N(t.startIcon,"me-2")}),t.children,t.endIcon&&/*#__PURE__*/k("i",{className:N(t.endIcon,"ms-2")})]}))})};ee.propTypes=G({startIcon:l.string,endIcon:l.string,caret:l.bool},g.propTypes&&g.propTypes),Object.assign({},m.prototype.props);var te=function(e){var t=G({},(H(e),e));/*#__PURE__*/return k(m,G({},t,{children:t.children}))};te.propTypes=G({},m.propTypes&&m.propTypes);var ne=["leftIcon","rightIcon","leftIconStyle","rightIconStyle"];Object.assign({},h.prototype.props);var re=function(e){var t=e.leftIcon,n=void 0===t?"":t,r=e.rightIcon,i=void 0===r?"":r,o=e.leftIconStyle,a=void 0===o?"text-secondary":o,l=e.rightIconStyle,c=void 0===l?"text-secondary":l,s=Y(e,ne);/*#__PURE__*/return T(h,G({},s,{className:"d-flex justify-content-between align-items-center",children:[/*#__PURE__*/T("span",{children:[n&&/*#__PURE__*/k("i",{className:n+" "+a+" me-2"}),s.children]}),i&&/*#__PURE__*/k("i",{className:i+" "+c})]}))};re.propTypes=G({},h.propTypes&&h.propTypes);var ie=function(e){/*#__PURE__*/return T(v,{striped:!0,hover:!0,children:[/*#__PURE__*/k("thead",{children:/*#__PURE__*/k("tr",{children:e.thead.map(function(t,n){/*#__PURE__*/return k("th",{className:N("",{"text-right":e.thead.length-1===n}),children:t.text},n)})})}),/*#__PURE__*/k("tbody",{children:e.tbody.map(function(e,t){var n;/*#__PURE__*/return T("tr",{className:N((n={},n[e.className]=void 0!==e.className,n)),children:[e.data.map(function(e,t){var n;/*#__PURE__*/return k("td",{className:N((n={},n[e.className]=void 0!==e.className,n)),children:e.item},t)}),e.actions&&/*#__PURE__*/k("td",{className:"text-right",children:e.actions})]},t)})})]})};ie.propTypes={thead:l.arrayOf(l.shape({className:l.string,text:l.string.isRequired})).isRequired,tbody:l.arrayOf(l.shape({className:l.string,data:l.arrayOf(l.shape({className:l.string,item:l.oneOfType([l.string,l.number,l.node]).isRequired})).isRequired,actions:l.node})).isRequired};var oe=function(r){var i,o,a,l,c=r.onFilter,s=void 0===c?function(){}:c,u=r.onSearch,d=void 0===u?function(){}:u,f=r.filters,p=void 0===f?[]:f,g=e.useState(""),m=g[1],h=(a=(o=t(i=g[0]))[0],l=o[1],n(function(){var e=setTimeout(function(){l(i)},500);return function(){clearTimeout(e)}},[i,500]),a);return e.useEffect(function(){d({value:{clientSearch:h}})},[h]),/*#__PURE__*/T(y,{children:[/*#__PURE__*/k(b,{md:"3",children:/*#__PURE__*/k(R,{className:"react-select default m-0 w-100",classNamePrefix:"react-select",name:"singleSelect",onChange:function(e){s(e)},defaultValue:p.find(function(e){return e.default}),options:p,placeholder:"Select filter"})}),/*#__PURE__*/k(b,{md:"6",children:/*#__PURE__*/k(S,{children:/*#__PURE__*/k(C,{onChange:function(e){return m(e.currentTarget.value.toString())},placeholder:"Search item"})})})]})},ae="...",le=function(e,t){return Array.from({length:t-e+1},function(t,n){return n+e})},ce=function(e){var t=e.onPageChange,n=void 0===t?function(){}:t,i=e.totalCount,o=e.siblingCount,a=e.currentPage,l=void 0===a?1:a,c=e.pageSize,s=function(e){var t=e.totalCount,n=e.pageSize,i=e.siblingCount,o=void 0===i?1:i,a=e.currentPage;return r(function(){var e=Math.ceil(t/n);if(o+5>=e)return le(1,e);var r=Math.max(a-o,1),i=Math.min(a+o,e),l=r>2,c=i<e-2,s=1,u=e;if(!l&&c){var d=le(1,3+2*o);return[].concat(d,[ae,e])}if(l&&!c){var f=le(e-(3+2*o)+1,e);return[s,ae].concat(f)}if(l&&c){var p=le(r,i);return[s,ae].concat(p,[ae,u])}},[t,n,o,a])}({currentPage:l,totalCount:void 0===i?0:i,siblingCount:void 0===o?1:o,pageSize:void 0===c?10:c});if(0===l||s.length<2)return null;var u=s[s.length-1];/*#__PURE__*/return k(w,{children:/*#__PURE__*/k("nav",{"aria-label":"Page navigation",children:/*#__PURE__*/T("ul",{className:"pagination",children:[/*#__PURE__*/k("li",{className:"page-item",children:/*#__PURE__*/T("button",{onClick:function(){n&&n(l-1)},className:"page-link","aria-label":"Next",children:[/*#__PURE__*/k("span",{"aria-hidden":"true",children:"«"}),/*#__PURE__*/k("span",{className:"sr-only",children:"Previous"})]})},"first-button"),s.map(function(e,t){return e===ae?/*#__PURE__*/k("li",{className:"pagination-item dots",children:"…"},ae+t):/*#__PURE__*/k("li",{className:"page-item "+(l===e&&" active"),children:/*#__PURE__*/k("button",{className:"page-link",onClick:function(){return n(e)},children:e})},e)}),/*#__PURE__*/k("li",{className:"page-item",children:/*#__PURE__*/T("button",{disabled:l===u,className:"page-link",onClick:function(){n&&n(l+1)},"aria-label":"Next",children:[/*#__PURE__*/k("span",{"aria-hidden":"true",children:"»"}),/*#__PURE__*/k("span",{className:"sr-only",children:"Next"})]})},"next-button")]})})})};function se(t){var n=t.renderRowSubComponent,r=t.className,i=void 0===r?"-highlight -striped ":r,o=t.handleSearch,a=void 0===o?function(){}:o,l=t.handleFilter,c=void 0===l?function(){}:l,s=t.handlePagination,u=void 0===s?function(){}:s,d=t.filters,f=void 0===d?[]:d,p=t.pagination,g=void 0===p?{currentPage:1,hasNextPage:!0,hasPrevPage:!1,nextPage:2,prevPage:null,size:10,totalPages:2,totalResults:17}:p,m=E({columns:t.columns,data:t.data,initialState:{pageSize:10,pageIndex:0}},P,I,x,F,O),h=m.getTableProps,v=m.getTableBodyProps,y=m.headerGroups,b=m.page,S=m.prepareRow,C=m.visibleColumns;/*#__PURE__*/return k(w,{children:/*#__PURE__*/T("div",{className:"ReactTable "+i,children:[/*#__PURE__*/k("div",{className:"pagination-top",children:/*#__PURE__*/k(oe,{filters:f,onFilter:function(e){return c(e)},onSearch:function(e){return a(e)}})}),/*#__PURE__*/T("table",G({},h(),{className:"rt-table",children:[/*#__PURE__*/k("thead",{className:"rt-thead -header",children:y.map(function(e){/*#__PURE__*/return k("tr",G({},e.getHeaderGroupProps(),{className:"rt-tr",children:e.headers.map(function(t,n){/*#__PURE__*/return T("th",G({},t.getHeaderProps(t.getSortByToggleProps()),{className:N("rt-th rt-resizable-header",{"-cursor-pointer":e.headers.length-1!==n,"-sort-asc":t.isSorted&&!t.isSortedDesc,"-sort-desc":t.isSorted&&t.isSortedDesc}),children:[/*#__PURE__*/T("div",{className:"rt-resizable-header-content",children:[t.render("Header"),/*#__PURE__*/k("div",G({},t.getResizerProps(),{className:N("col-resizer",{" active":t.isResizing})}))]}),/*#__PURE__*/k("div",{children:e.headers.length-1===n?null:t.canFilter?t.render("Filter"):null})]}))})}))})}),/*#__PURE__*/k("tbody",G({},v(),{className:"rt-tbody",children:b.map(function(t,r){var i;return S(t),/*#__PURE__*/T(e.Fragment,{children:[/*#__PURE__*/k("tr",G({},t.getRowProps(),{className:N("rt-tr",{" -odd":r%2==0},{" -even":r%2==1}),children:t.cells.map(function(e){/*#__PURE__*/return k("td",G({},e.getCellProps(),{className:"rt-td",children:e.render("Cell")}))})})),t.isExpanded?/*#__PURE__*/k("tr",{children:/*#__PURE__*/k("td",{colSpan:C.length,children:n&&n({row:t})})}):null]},null==(i=t.getRowProps())?void 0:i.key)})}))]})),/*#__PURE__*/k("div",{className:"pagination-bottom",children:/*#__PURE__*/k("div",{className:"-pagination",children:/*#__PURE__*/k("div",{className:"-center flex-nowrap",children:/*#__PURE__*/k(ce,{className:"pagination-bar",pagination:g,currentPage:g.currentPage,totalCount:g.totalResults,pageSize:g.size,onPageChange:function(e){u({page:e})}})})})})]})})}var ue="inline-default",de="block-default",fe="atomic-entity",pe="image",ge="divider",me="link",he="mention",ve="checklist",ye="start";function be(e){var t=e.name,n=e.profileImageUrl,r=e._id,o=e.onSelect,a=void 0===o?function(){}:o,l=i(function(e){e.preventDefault(),a({name:t,profileImageUrl:n,_id:r})});/*#__PURE__*/return T("div",{className:"d-flex align-items-center",children:[/*#__PURE__*/k("div",{className:"avatar mb-1",children:/*#__PURE__*/k("img",{src:n||q,alt:t})}),/*#__PURE__*/k("div",{onClick:l,className:"btn btn-link p-2 mb-1",children:t})]})}var Se=["suggestions"];function Ce(e){var t=e.suggestions,n=Y(e,Se),r=o(Pe);/*#__PURE__*/return k(w,{children:t.length?/*#__PURE__*/k("div",{className:"mention-suggestions position-absolute mt-4 p-2 shadow-md",style:G({},r.computedPosForMentionSuggestions),children:t.map(function(e,t){/*#__PURE__*/return k(be,G({},e,n),e.name+t)})}):null})}function Ne(e,t,n){for(var r,i,o=t.getText();null!==(r=e.exec(o));)n(i=r.index,i+r[0].length)}var Te=/\B@\w+/g,ke=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,we=new L([{strategy:function(e,t,n){Ne(Te,e,t)},component:function(e){var t=a(null),r=o(Pe),l=r.editorRef,c=r.mentionSuggestions,s=r.updateComputedPosForMentionSuggestions,u=r.handleMentionSelect,d=i(function(){var e,n;return{left:(null==(e=l.current)||null==(n=e.editor)?void 0:n.getBoundingClientRect()).width-t.current.offsetLeft<240?t.current.offsetLeft-230:t.current.offsetLeft,top:t.current.offsetTop,display:"block"}},[]),f=i(function(){return{display:"none"}},[]);function p(){if(!e.entityKey)return null;var t=e.contentState.getEntity(e.entityKey);return G({},null==t?void 0:t.getData())}return n(function(){t.current&&s(d())},[]),/*#__PURE__*/T(w,{children:[p()?/*#__PURE__*/k("a",{href:"/admin/users/"+p()._id,className:"text-primary",children:p().name}):/*#__PURE__*/k("span",{ref:t,className:"",children:e.children}),/*#__PURE__*/k(Ce,{suggestions:c.filter(function(t){var n;return t.name.toLowerCase().includes(e.decoratedText.slice(1,null==e||null==(n=e.decoratedText)?void 0:n.length).toLowerCase())}),onSelect:function(t){var n=t.name,r=t.profileImageUrl,i=t._id,o="@"+n.split(" ").join("_");u(e.contentState,e.blockKey,{start:e.start,end:e.end},{mention:o+" ",profileImageUrl:r,_id:i,name:n}),s(f())}})]})}},{strategy:function(e,t,n){Ne(ke,e,t)},component:function(e){/*#__PURE__*/return k("a",{href:e.decoratedText,title:e.decoratedText,target:"_blank",rel:"noreferrer",children:e.children})}},{strategy:function(e,t,n){e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&n.getEntity(t).getType()===me},t)},component:function(e){var t=e.contentState.getEntity(e.entityKey).getData();return t.href?/*#__PURE__*/k("a",{href:t.href,title:t.linkText,target:"_blank",rel:"noreferrer",children:t.linkText||t.href}):null}}]),Ee=["children"],Pe=/*#__PURE__*/e.createContext(),Ie=function(e){var r=e.children,i=Y(e,Ee),o=function(e){var r,i,o=a(null),l=t(z.createEmpty(we)),c=l[0],s=l[1],u=t(!1),d=u[0],f=u[1],p=t({display:"none"}),g=p[0],m=p[1];n(function(){var t;try{"string"==typeof e.value&&(t=JSON.parse(e.value)),"object"==typeof e.value&&(t=e.value)}catch(t){if(console.log(t),"string"==typeof e.value)return y(z.createWithContent(j.createFromText(e.value)))}return y(e.value||t?z.set(c,{currentContent:A(t),directionMap:z.createWithContent(A(t)).getDirectionMap()}):z.createEmpty(we))},[e.value]);var h=a(null),v=function(e,t){var n=c.getCurrentContent().createEntity(e,"IMMUTABLE",G({},t)),r=n.getLastCreatedEntityKey(),i=z.set(c,{currentContent:n},"create-entity");y(U.insertAtomicBlock(i,r," "))},y=function(t){var n=t.getCurrentContent();s(t),e.onDataStructureChange(JSON.stringify(M(n)))},b=function(t){try{if(!e.handleUpload)return Promise.resolve(console.log("Uploader function not specified"));var n=t.every(function(e){return"image"===e.type.split("/")[0]});return Promise.resolve(n?function(n,r){try{var i=Promise.resolve(Promise.all(t.map(function(t){return e.handleUpload(t)}))).then(function(e){console.log(e),e.every(function(e){return e})||console.log("one or mutiple files don't have storage info"),e.map(function(e){return v(pe,{storageInfo:e})})})}catch(e){return r(e)}return i&&i.then?i.then(void 0,r):i}(0,function(e){return console.log(e)}):console.log("All files has to be images"))}catch(e){return Promise.reject(e)}},S=function(e){e.preventDefault(),b(Array.from(e.target.files))},C=((r={})[pe]=function(){return h.current.click()},r[me]=function(){return y(function(e){var t=window.prompt("Paste the link bellow:");if(t){var n=window.prompt("Paste the link-text below:");if(n){var r=e.getCurrentContent();r.createEntity(me,"MUTABLE",{href:t,linkText:n});var i=r.getLastCreatedEntityKey(),o=e.getSelection(),a=D.replaceText(r,o,n,null,i),l=o.set("anchorOffset",o.getAnchorOffset()+n.length),c=z.set(e,{currentContent:a},"create-entity"),s=z.forceSelection(c,l);return console.log(l.getAnchorOffset(),"editor selection anchor offset after link insert:",s.getSelection().getAnchorOffset()),s}}}(c))},r[ge]=function(){return v(ge,{})},r[he]=function(){},r[ve]=function(){v(ve,{})},r),N=((i={})[ue]=function(e){return y(B.toggleInlineStyle(c,e))},i[de]=function(e){return y(B.toggleBlockType(c,e))},i[fe]=function(e){C[e]()},i);return{editorRef:o,editorState:c,computedPosForMentionSuggestions:g,focusedForEditing:d,getFileInputProps:function(){return{ref:h,onChange:S}},generateLink:function(t){try{return Promise.resolve(e.linkGeneratorFn&&"function"==typeof e.linkGeneratorFn?e.linkGeneratorFn(t):null)}catch(e){return Promise.reject(e)}},handleDroppedFiles:function(e,t){return b(t)},handlePastedFiles:function(e){return b(e)},handleEditorStateChange:y,handleKeyCommand:function(e,t){var n=B.handleKeyCommand(t,e);return n?(y(n),"handled"):"not-handled"},handleToolClick:function(e,t){return t.preventDefault(),c.getSelection().getHasFocus()&&null!=e&&e.element?void N[e.element](e.style):null},forceFocusEditorEnd:function(e){var t;(null==e?void 0:e.preventDefault)&&e.preventDefault(),null==(t=o.current.editor)||t.focus(),y(z.moveFocusToEnd(c))},updateComputedPosForMentionSuggestions:function(e){return m(e)},handleMentionSelect:function(e,t,n,r){var i=K.createEmpty(t),o=e.createEntity(he,"IMMUTABLE",G({},r)),a=o.getLastCreatedEntityKey();o=D.replaceText(e,i.merge({anchorOffset:n.start,focusOffset:n.end}),r.mention,c.getCurrentInlineStyle(),a),y(z.forceSelection(z.moveFocusToEnd(z.set(c,{currentContent:o})),o.getSelectionAfter()))},activateEditor:function(){return f(!0)},deactivateEditor:function(){return f(!1)}}}({handleUpload:i.handleUpload||function(){return Promise.resolve()},linkGeneratorFn:i.linkGeneratorFn,onDataStructureChange:i.onDataStructureChange||function(){},value:i.value||null}),l=G({},(H(o),o));/*#__PURE__*/return k(Pe.Provider,{value:G({},l,{mentionSuggestions:i.mentionSuggestions||[]}),children:r})};function xe(e){var t;return e.src||e.link?/*#__PURE__*/k("img",{src:e.src||e.link,alt:e.alt||(null==(t=e.storageInfo)?void 0:t.Key)||"...",className:"unselectable"}):null}function Fe(){/*#__PURE__*/return k("hr",{})}function Oe(t){/*#__PURE__*/return k(e.Fragment,{})}var Re=["editorRef","onResizeEnd","reference","currentSize"],De=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100];function ze(t){var n,r,i=t.editorRef,o=t.onResizeEnd,a=t.reference,l=void 0===a?"left":a,c=t.currentSize,s=void 0===c?10:c,u=Y(t,Re),d=e.useState(!1),f=d[0],p=d[1],g=e.useState(s),m=g[0],h=g[1],v=null==(n=i.current)||null==(r=n.editor)?void 0:r.getBoundingClientRect(),y=e.useCallback(function(e){e.preventDefault();var t=function(e){var t=[].concat(De);p(!0);var n="center"===l?v.width/2:v.width,r=parseInt(Math.abs(e.clientX-("center"===l?v.left+v.width/2:"end"===l?v.left+v.width:v.left))),i=parseInt(r/n*100);t.sort(function(e,t){return Math.abs(i-e)-Math.abs(i-t)});var a=t[0];h(a),o&&o({partition:a});var c=u.block.getEntityAt(0);u.contentState.mergeEntityData(c,{size:a})};document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",function e(){p(!1),document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",e,!1)},!1)},[o]);/*#__PURE__*/return T(w,{children:[/*#__PURE__*/k("div",{className:"d-inline-block p-2 unselectable",style:{cursor:"col-resize"},onMouseDown:y,children:/*#__PURE__*/k("div",{className:"bg-primary rounded resize-bar"})}),f&&/*#__PURE__*/k("div",{className:"resize-guides-container position-absolute ",children:De.map(function(e){return parseInt(window.getComputedStyle(document.querySelector(".draft-editor-container"),null).getPropertyValue("padding-left")),{percentage:e,pixels:Math.ceil(v.width*e/100)}}).map(function(e){/*#__PURE__*/return k("div",{className:N("resize-guide position-absolute rounded",{"bg-info":"start"===l&&e.percentage===m||"end"===l&&100-e.percentage===m}),style:{left:e.pixels}},e.pixels)})})]})}var Le=["editorRef","onAlignmentChange"],je=[{label:"Align left",style:ye,icon:"fa-solid fa-align-left"},{label:"Align center",style:"center",icon:"fa-solid fa-align-justify"},{label:"Align right",style:"end",icon:"fa-solid fa-align-right"}];function Ae(e){var t=e.onAlignmentChange,n=Y(e,Le),r=i(function(e){var r=e.alignment;t&&t({alignment:r});var i=n.block.getEntityAt(0);n.contentState.mergeEntityData(i,{alignment:r})},[t]);/*#__PURE__*/return k("div",{className:"d-inline-block shadow-md rounded mb-1",children:je.map(function(e){/*#__PURE__*/return k(c,{title:null==e?void 0:e.label,type:"button",className:N("btn btn-icon m-0 text-muted",{}),onClick:function(t){return r({alignment:null==e?void 0:e.style})},children:e.icon?/*#__PURE__*/k("i",{className:e.icon}):null==e?void 0:e.label},null==e?void 0:e.style)})})}var Me=["children"];function Be(t){var n=t.children,r=Y(t,Me),i=e.useState(!1),o=i[0],a=i[1],l=e.useState(r.size||30),c=l[0],s=l[1],u=e.useState(r.alignment||ye),d=u[0],f=u[1],p=function(){return{"justify-content-start":"start"===d,"justify-content-center":"center"===d,"justify-content-end":"end"===d}};/*#__PURE__*/return T(w,{children:[o&&d&&/*#__PURE__*/k("div",{className:N("d-flex",p()),children:/*#__PURE__*/k(Ae,G({onAlignmentChange:function(e){return f(e.alignment)}},r))}),/*#__PURE__*/T("div",{className:N("d-flex align-items-center position-relative",p()),children:[o&&"start"!==d&&/*#__PURE__*/k(ze,G({},r,{reference:d,onResizeEnd:function(e){return s(e.partition)}})),/*#__PURE__*/k("div",{className:N("d-inline-block rounded resize-container unselectable",{"resize-focused":o,"w-10":10===c,"w-15":15===c,"w-20":20===c,"w-25":25===c,"w-30":30===c,"w-35":35===c,"w-40":40===c,"w-45":45===c,"w-50":50===c,"w-55":55===c,"w-60":60===c,"w-65":65===c,"w-70":70===c,"w-75":75===c,"w-80":80===c,"w-85":85===c,"w-90":90===c,"w-95":95===c,"w-100":100===c}),onClick:function(){return a(function(e){return!e})},children:n}),o&&"end"!==d&&/*#__PURE__*/k(ze,G({},r,{reference:d,currentSize:c,onResizeEnd:function(e){return s(e.partition)}}))]})]})}var Ue=["type","data","editorControllers"];function Ke(e){var t=e.type,n=e.data,r=null,i=G({},n,e.editorControllers,Y(e,Ue));return t===pe&&(r=/*#__PURE__*/k(Be,G({},i,{children:/*#__PURE__*/k(xe,G({},n))}))),t===ge&&(r=/*#__PURE__*/k(Fe,G({},n))),t===ve&&(r=/*#__PURE__*/k(Oe,G({},n))),r}var _e=["generateLink"],qe=function(e){return"atomic"===e.getType()?{component:Ge,editable:!1}:null},Ge=function(t){var n,r,i,a,l=t.block.getEntityAt(0),c=l&&t.contentState.getEntity(l),s=null==c?void 0:c.getType(),u=o(Pe),d=u.generateLink,f=Y(u,_e),p=(n=G({generateLink:d},null==c?void 0:c.getData()),i=(r=e.useState(n.src))[0],a=r[1],e.useEffect(function(){return function(){try{Promise.resolve(function(){if(!n.src)return function(e,t){try{var r=function(){if(!n.generateLink||"function"!=typeof n.generateLink)throw Error("link gnerator function must be supplied");return Promise.resolve(n.generateLink(n.storageInfo)).then(function(e){if(!e)throw new Error("link generator function must return a valid link or else provide a valid  image source");a(e)})}()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(0,function(e){a(q),console.log(e)})}())}catch(e){return Promise.reject(e)}}(),function(){}},[n.generateLink]),{link:i});/*#__PURE__*/return k(Ke,G({type:s,data:G({},null==c?void 0:c.getData(),p),editorControllers:G({},f)},t))},He=["readOnly"];function Ye(t){var n=t.readOnly,r=void 0!==n&&n,i=Y(t,He),o=e.useContext(Pe);/*#__PURE__*/return k(w,{children:/*#__PURE__*/k(_,{ref:o.editorRef,blockRendererFn:qe,placeholder:i.placeholder,onChange:o.handleEditorStateChange,editorState:o.editorState,spellCheck:!0,handleKeyCommand:o.handleKeyCommand,handleDroppedFiles:o.handleDroppedFiles,handlePastedFiles:o.handlePastedFiles,readOnly:r,onFocus:o.activateEditor,onBlur:o.deactivateEditor})})}var Je={INLINE_TYPES:[{label:"Underline",style:"UNDERLINE",icon:"fa-solid fa-underline",element:ue},{label:"Bold",style:"BOLD",icon:"fa-solid fa-bold",element:ue},{label:"Italic",style:"ITALIC",icon:"fa-solid fa-italic",element:ue},{label:"Strike through",style:"STRIKETHROUGH",icon:"fa-solid fa-strikethrough",element:ue}],BLOCK_TYPES:[{label:"Header",style:"header-three",icon:"fa-solid fa-heading",element:de},{label:"UL",style:"unordered-list-item",icon:"fa-solid fa-list",element:de},{label:"OL",style:"ordered-list-item",icon:"fa-solid fa-list-ol",element:de},{label:"Blockquote",style:"blockquote",icon:"fa-solid fa-quote-left",element:de},{label:"Code block",style:"code-block",icon:"fa-solid fa-code",element:de}],ENTITY_TYPES:[{label:"Image",style:pe,icon:"fa-solid fa-images",element:fe},{label:"Divider",style:ge,icon:"fa-solid fa-minus",element:fe}]};function Ve(e){/*#__PURE__*/return k("span",{className:"draft-toolbar-button-separator",children:"|"})}var We=/*#__PURE__*/e.forwardRef(function(e,t){/*#__PURE__*/return k("input",G({},e,{ref:t,className:"d-none",type:"file",accept:e.accept||"image/*"}))});function Ze(t){var n=e.useContext(Pe),r=n.editorState,i=n.handleToolClick;/*#__PURE__*/return T(w,{children:[/*#__PURE__*/k(We,G({},(0,n.getFileInputProps)())),Object.keys(Je).map(function(t,n){var o;/*#__PURE__*/return T(e.Fragment,{children:[null==(o=Je[t])?void 0:o.map(function(e){/*#__PURE__*/return k(c,{title:null==e?void 0:e.label,type:"button",className:"btn btn-icon text-muted m-0",onMouseDown:function(t){return i(e,t)},children:e.icon?/*#__PURE__*/k("i",{className:N(e.icon,{"text-primary":r.getCurrentInlineStyle().has(null==e?void 0:e.style)||(null==r?void 0:r.getCurrentContent().getBlockForKey(null==r?void 0:r.getSelection().getStartKey()).getType())===(null==e?void 0:e.style)})}):null==e?void 0:e.label},null==e?void 0:e.style)}),n<Object.keys(Je).length-1&&/*#__PURE__*/k(Ve,{})]},t)})]})}function Xe(t){var n=e.useContext(Pe),r=n.forceFocusEditorEnd;/*#__PURE__*/return T("div",{className:N("draft-editor-container d-flex flex-column",{"editor-disabled":t.readOnly,"editor-active":n.focusedForEditing}),children:[!t.readOnly&&/*#__PURE__*/T("div",{children:[/*#__PURE__*/k(Ze,G({},t)),/*#__PURE__*/k("hr",{})]}),/*#__PURE__*/k(Ye,G({},t)),/*#__PURE__*/k("div",{className:"flex-grow-1",onMouseDown:r})]})}function Qe(e){/*#__PURE__*/return k(Ie,G({},e,{children:/*#__PURE__*/k(Xe,G({},e))}))}Qe.propTypes={value:l.string,linkGeneratorFn:l.func,handleUpload:l.func};export{se as AdvancedTable,J as Button,V as Card,W as CardBody,Z as CardFooter,X as CardHeader,Q as Dropdown,re as DropdownItem,te as DropdownMenu,ee as DropdownToggle,ie as SimpleTable,Qe as TextEditor};
//# sourceMappingURL=ims-ui-kit.module.js.map
