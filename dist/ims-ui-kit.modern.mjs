import e,{useState as t,useEffect as n,useMemo as r,useCallback as l,useContext as o,useRef as a}from"react";import i from"prop-types";import{Button as s,Card as c,CardBody as d,CardFooter as p,CardHeader as u,Dropdown as g,DropdownToggle as h,DropdownMenu as m,DropdownItem as f,Table as y,Row as b,Col as v,InputGroup as T,Input as N,Pagination as S,PaginationItem as C,PaginationLink as k,List as w,ListGroupItem as E,ListGroupItemHeading as I,ListGroupItemText as x,TabContent as P,TabPane as O}from"reactstrap";import F from"classnames";import{jsxs as L,jsx as j,Fragment as R}from"react/jsx-runtime";import{useTable as D,useSortBy as z,useExpanded as A,usePagination as M,useResizeColumns as B,useFlexLayout as U}from"react-table";import K from"react-select";import{Modifier as _,EditorState as G,CompositeDecorator as q,ContentState as H,convertFromRaw as $,convertToRaw as Y,RichUtils as J,SelectionState as V,AtomicBlockUtils as W,Editor as Z}from"draft-js";import X from"assets/img/default-avatar.png";function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q.apply(this,arguments)}function ee(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function te(e,t){if(null==e)return{};var n,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)t.indexOf(n=o[r])>=0||(l[n]=e[n]);return l}Object.assign({leftIcon:"",rightIcon:""},s.prototype.props);const ne=e=>/*#__PURE__*/L(s,Q({},e,{children:[e.leftIcon?/*#__PURE__*/j("i",{className:F(e.leftIcon,"me-2")}):null,e.children,e.rightIcon?/*#__PURE__*/j("i",{className:F(e.rightIcon,"ms-2")}):null]}));ne.propTypes=Q({leftIcon:i.string,rightIcon:i.string},s.propTypes&&s.propTypes),Object.assign({},c.prototype.props);const re=e=>/*#__PURE__*/j(c,Q({},e,{children:e.children}));re.propTypes=Q({},c.propTypes&&c.propTypes),Object.assign({},d.prototype.props);const le=e=>/*#__PURE__*/j(d,Q({},e,{children:e.children}));le.propTypes=Q({},d.propTypes&&d.propTypes),Object.assign({},p.prototype.props);const oe=e=>/*#__PURE__*/j(p,Q({},e,{children:e.children}));oe.propTypes=Q({},p.propTypes&&p.propTypes),Object.assign({},u.prototype.props);const ae=e=>/*#__PURE__*/j(u,Q({},e,{children:e.children}));ae.propTypes=Q({},u.propTypes&&u.propTypes),Object.assign({},g.prototype.props);const ie=e=>{let t=Q({},(ee(e),e));/*#__PURE__*/return j(g,Q({},t,{children:t.children}))};ie.propTypes=Q({},g.propTypes&&g.propTypes);const se=["caret"];Object.assign({startIcon:"",endIcon:"",caret:!0},h.prototype.props);const ce=e=>{let t=te(e,se);/*#__PURE__*/return j(R,{children:/*#__PURE__*/L(h,Q({caret:!t.startIcon&&!t.endIcon&&t.caret},t,{children:[t.startIcon&&/*#__PURE__*/j("i",{className:F(t.startIcon,"me-2")}),t.children,t.endIcon&&/*#__PURE__*/j("i",{className:F(t.endIcon,"ms-2")})]}))})};ce.propTypes=Q({startIcon:i.string,endIcon:i.string,caret:i.bool},h.propTypes&&h.propTypes),Object.assign({},m.prototype.props);const de=e=>{let t=Q({},(ee(e),e));/*#__PURE__*/return j(m,Q({},t,{children:t.children}))};de.propTypes=Q({},m.propTypes&&m.propTypes);const pe=["leftIcon","rightIcon","leftIconStyle","rightIconStyle"];Object.assign({},f.prototype.props);const ue=e=>{let{leftIcon:t="",rightIcon:n="",leftIconStyle:r="text-secondary",rightIconStyle:l="text-secondary"}=e,o=te(e,pe);/*#__PURE__*/return L(f,Q({},o,{className:"d-flex justify-content-between align-items-center",children:[/*#__PURE__*/L("span",{children:[t&&/*#__PURE__*/j("i",{className:`${t} ${r} me-2`}),o.children]}),n&&/*#__PURE__*/j("i",{className:`${n} ${l}`})]}))};ue.propTypes=Q({},f.propTypes&&f.propTypes);const ge=e=>/*#__PURE__*/L(y,{striped:!0,hover:!0,children:[/*#__PURE__*/j("thead",{children:/*#__PURE__*/j("tr",{children:e.thead.map((t,n)=>/*#__PURE__*/j("th",{className:F("",{"text-right":e.thead.length-1===n}),children:t.text},n))})}),/*#__PURE__*/j("tbody",{children:e.tbody.map((e,t)=>/*#__PURE__*/L("tr",{className:F({[e.className]:void 0!==e.className}),children:[e.data.map((e,t)=>/*#__PURE__*/j("td",{className:F({[e.className]:void 0!==e.className}),children:e.item},t)),e.actions&&/*#__PURE__*/j("td",{className:"text-right",children:e.actions})]},t))})]});ge.propTypes={thead:i.arrayOf(i.shape({className:i.string,text:i.string.isRequired})).isRequired,tbody:i.arrayOf(i.shape({className:i.string,data:i.arrayOf(i.shape({className:i.string,item:i.oneOfType([i.string,i.number,i.node]).isRequired})).isRequired,actions:i.node})).isRequired};const he=({onFilter:r=(()=>{}),onSearch:l=(()=>{}),filters:o=[]})=>{let[a,i]=e.useState("");const s=function(e,r){const[l,o]=t(e);return n(()=>{const t=setTimeout(()=>{o(e)},500);return()=>{clearTimeout(t)}},[e,500]),l}(a);return e.useEffect(()=>{l({value:{clientSearch:s}})},[s]),/*#__PURE__*/L(b,{children:[/*#__PURE__*/j(v,{md:"3",children:/*#__PURE__*/j(K,{className:"react-select default m-0 w-100",classNamePrefix:"react-select",name:"singleSelect",onChange:e=>{r(e)},defaultValue:o.find(e=>e.default),options:o,placeholder:"Select filter"})}),/*#__PURE__*/j(v,{md:"6",children:/*#__PURE__*/j(T,{children:/*#__PURE__*/j(N,{onChange:e=>i(e.currentTarget.value.toString()),placeholder:"Search item"})})})]})},me="...",fe=(e,t)=>Array.from({length:t-e+1},(t,n)=>n+e),ye=e=>{const{onPageChange:t=(()=>{}),totalCount:n=0,siblingCount:l=1,currentPage:o=1,pageSize:a=10}=e,i=(({totalCount:e,pageSize:t,siblingCount:n=1,currentPage:l})=>r(()=>{const r=Math.ceil(e/t);if(n+5>=r)return fe(1,r);const o=Math.max(l-n,1),a=Math.min(l+n,r),i=o>2,s=a<r-2,c=r;if(!i&&s)return[...fe(1,3+2*n),me,r];if(i&&!s){let e=fe(r-(3+2*n)+1,r);return[1,me,...e]}if(i&&s){let e=fe(o,a);return[1,me,...e,me,c]}},[e,t,n,l]))({currentPage:o,totalCount:n,siblingCount:l,pageSize:a});if(0===o||i.length<2)return null;let s=i[i.length-1];/*#__PURE__*/return j(R,{children:/*#__PURE__*/j("nav",{"aria-label":"Page navigation",children:/*#__PURE__*/L("ul",{className:"pagination",children:[/*#__PURE__*/j("li",{className:"page-item",children:/*#__PURE__*/L("button",{onClick:()=>{t&&t(o-1)},className:"page-link","aria-label":"Next",children:[/*#__PURE__*/j("span",{"aria-hidden":"true",children:"«"}),/*#__PURE__*/j("span",{className:"sr-only",children:"Previous"})]})},"first-button"),i.map((e,n)=>e===me?/*#__PURE__*/j("li",{className:"pagination-item dots",children:"…"},me+n):/*#__PURE__*/j("li",{className:`page-item ${o===e&&" active"}`,children:/*#__PURE__*/j("button",{className:"page-link",onClick:()=>t(e),children:e})},e)),/*#__PURE__*/j("li",{className:"page-item",children:/*#__PURE__*/L("button",{disabled:o===s,className:"page-link",onClick:()=>{t&&t(o+1)},"aria-label":"Next",children:[/*#__PURE__*/j("span",{"aria-hidden":"true",children:"»"}),/*#__PURE__*/j("span",{className:"sr-only",children:"Next"})]})},"next-button")]})})})};function be({columns:t,data:n,renderRowSubComponent:r,className:l="-highlight -striped ",handleSearch:o=(()=>{}),handleFilter:a=(()=>{}),handlePagination:i=(()=>{}),filters:s=[],pagination:c={currentPage:1,hasNextPage:!0,hasPrevPage:!1,nextPage:2,prevPage:null,size:10,totalPages:2,totalResults:17}}){const{getTableProps:d,getTableBodyProps:p,headerGroups:u,page:g,prepareRow:h,state:{},visibleColumns:m}=D({columns:t,data:n,initialState:{pageSize:10,pageIndex:0}},z,A,M,B,U);/*#__PURE__*/return j(R,{children:/*#__PURE__*/L("div",{className:"ReactTable "+l,children:[/*#__PURE__*/j("div",{className:"pagination-top",children:/*#__PURE__*/j(he,{filters:s,onFilter:e=>a(e),onSearch:e=>o(e)})}),/*#__PURE__*/L("table",Q({},d(),{className:"rt-table",children:[/*#__PURE__*/j("thead",{className:"rt-thead -header",children:u.map(e=>/*#__PURE__*/j("tr",Q({},e.getHeaderGroupProps(),{className:"rt-tr",children:e.headers.map((t,n)=>/*#__PURE__*/L("th",Q({},t.getHeaderProps(t.getSortByToggleProps()),{className:F("rt-th rt-resizable-header",{"-cursor-pointer":e.headers.length-1!==n,"-sort-asc":t.isSorted&&!t.isSortedDesc,"-sort-desc":t.isSorted&&t.isSortedDesc}),children:[/*#__PURE__*/L("div",{className:"rt-resizable-header-content",children:[t.render("Header"),/*#__PURE__*/j("div",Q({},t.getResizerProps(),{className:F("col-resizer",{" active":t.isResizing})}))]}),/*#__PURE__*/j("div",{children:e.headers.length-1===n?null:t.canFilter?t.render("Filter"):null})]})))})))}),/*#__PURE__*/j("tbody",Q({},p(),{className:"rt-tbody",children:g.map((t,n)=>{var l;return h(t),/*#__PURE__*/L(e.Fragment,{children:[/*#__PURE__*/j("tr",Q({},t.getRowProps(),{className:F("rt-tr",{" -odd":n%2==0},{" -even":n%2==1}),children:t.cells.map(e=>/*#__PURE__*/j("td",Q({},e.getCellProps(),{className:"rt-td",children:e.render("Cell")})))})),t.isExpanded?/*#__PURE__*/j("tr",{children:/*#__PURE__*/j("td",{colSpan:m.length,children:r&&r({row:t})})}):null]},null==(l=t.getRowProps())?void 0:l.key)})}))]})),/*#__PURE__*/j("div",{className:"pagination-bottom",children:/*#__PURE__*/j("div",{className:"-pagination",children:/*#__PURE__*/j("div",{className:"-center flex-nowrap",children:/*#__PURE__*/j(ye,{className:"pagination-bar",pagination:c,currentPage:c.currentPage,totalCount:c.totalResults,pageSize:c.size,onPageChange:e=>{i({page:e})}})})})})]})})}const ve="inline-default",Te="block-default",Ne="atomic-entity",Se="image",Ce="divider",ke="link",we="mention",Ee="checklist",Ie="start";function xe({name:e,profileImageUrl:t,_id:n,onSelect:r=(()=>{})}){let o=l(l=>{l.preventDefault(),r({name:e,profileImageUrl:t,_id:n})});/*#__PURE__*/return L("div",{className:"d-flex align-items-center",children:[/*#__PURE__*/j("div",{className:"avatar mb-1",children:/*#__PURE__*/j("img",{src:t||X,alt:e})}),/*#__PURE__*/j("div",{onClick:o,className:"btn btn-link p-2 mb-1",children:e})]})}const Pe=["suggestions"];function Oe(e){let{suggestions:t}=e,n=te(e,Pe),{computedPosForMentionSuggestions:r}=o(ze);/*#__PURE__*/return j(R,{children:t.length?/*#__PURE__*/j("div",{className:"mention-suggestions position-absolute mt-4 p-2 shadow-md",style:Q({},r),children:t.map((e,t)=>/*#__PURE__*/j(xe,Q({},e,n),e.name+t))}):null})}function Fe(e,t,n){const r=t.getText();let l,o;for(;null!==(l=e.exec(r));)o=l.index,n(o,o+l[0].length)}const Le=/\B@\w+/g,je=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,Re=new q([{strategy:function(e,t,n){Fe(Le,e,t)},component:function(e){let t=a(null),{editorRef:r,mentionSuggestions:i,updateComputedPosForMentionSuggestions:s,handleMentionSelect:c}=o(ze);const d=l(()=>{var e,n;return{left:(null==(e=r.current)||null==(n=e.editor)?void 0:n.getBoundingClientRect()).width-t.current.offsetLeft<240?t.current.offsetLeft-230:t.current.offsetLeft,top:t.current.offsetTop,display:"block"}},[]),p=l(()=>({display:"none"}),[]);function u(){if(!e.entityKey)return null;const t=e.contentState.getEntity(e.entityKey);return Q({},null==t?void 0:t.getData())}return n(()=>{t.current&&s(d())},[]),/*#__PURE__*/L(R,{children:[u()?/*#__PURE__*/j("a",{href:"/admin/users/"+u()._id,className:"text-primary",children:u().name}):/*#__PURE__*/j("span",{ref:t,className:"",children:e.children}),/*#__PURE__*/j(Oe,{suggestions:i.filter(t=>{var n;return t.name.toLowerCase().includes(e.decoratedText.slice(1,null==e||null==(n=e.decoratedText)?void 0:n.length).toLowerCase())}),onSelect:({name:t,profileImageUrl:n,_id:r})=>{let l="@"+t.split(" ").join("_");c(e.contentState,e.blockKey,{start:e.start,end:e.end},{mention:l+" ",profileImageUrl:n,_id:r,name:t}),s(p())}})]})}},{strategy:function(e,t,n){Fe(je,e,t)},component:function(e){/*#__PURE__*/return j("a",{href:e.decoratedText,title:e.decoratedText,target:"_blank",rel:"noreferrer",children:e.children})}},{strategy:(e,t,n)=>{e.findEntityRanges(e=>{const t=e.getEntity();return null!==t&&n.getEntity(t).getType()===ke},t)},component:function(e){let t=e.contentState.getEntity(e.entityKey).getData();return t.href?/*#__PURE__*/j("a",{href:t.href,title:t.linkText,target:"_blank",rel:"noreferrer",children:t.linkText||t.href}):null}}]),De=["children"],ze=/*#__PURE__*/e.createContext(),Ae=e=>{let{children:r}=e,l=te(e,De),o=function(e){const r=a(null),[l,o]=t(G.createEmpty(Re)),[i,s]=t(!1),[c,d]=t({display:"none"});n(()=>{let t;try{"string"==typeof e.value&&(t=JSON.parse(e.value)),"object"==typeof e.value&&(t=e.value)}catch(t){if(console.log(t),"string"==typeof e.value)return g(G.createWithContent(H.createFromText(e.value)))}return g(e.value||t?G.set(l,{currentContent:$(t),directionMap:G.createWithContent($(t)).getDirectionMap()}):G.createEmpty(Re))},[e.value]);const p=a(null),u=(e,t)=>{const n=l.getCurrentContent().createEntity(e,"IMMUTABLE",Q({},t)),r=n.getLastCreatedEntityKey(),o=G.set(l,{currentContent:n},"create-entity");g(W.insertAtomicBlock(o,r," "))},g=t=>{const n=t.getCurrentContent();o(t),e.onDataStructureChange(JSON.stringify(Y(n)))},h=async t=>{if(!e.handleUpload)return console.log("Uploader function not specified");if(!t.every(e=>"image"===e.type.split("/")[0]))return console.log("All files has to be images");try{let n=await Promise.all(t.map(t=>e.handleUpload(t)));console.log(n),n.every(e=>e)||console.log("one or mutiple files don't have storage info"),n.map(e=>u(Se,{storageInfo:e}))}catch(e){return console.log(e)}},m=e=>{e.preventDefault(),h(Array.from(e.target.files))},f={[Se]:()=>p.current.click(),[ke]:()=>g((e=>{let t=window.prompt("Paste the link bellow:");if(t){let n=window.prompt("Paste the link-text below:");if(n){const r=e.getCurrentContent();r.createEntity(ke,"MUTABLE",{href:t,linkText:n});let l=r.getLastCreatedEntityKey();const o=e.getSelection(),a=_.replaceText(r,o,n,null,l),i=o.set("anchorOffset",o.getAnchorOffset()+n.length),s=G.set(e,{currentContent:a},"create-entity"),c=G.forceSelection(s,i);return console.log(i.getAnchorOffset(),"editor selection anchor offset after link insert:",c.getSelection().getAnchorOffset()),c}}})(l)),[Ce]:()=>u(Ce,{}),[we]:()=>{},[Ee]:()=>{u(Ee,{})}},y={[ve]:e=>g(J.toggleInlineStyle(l,e)),[Te]:e=>g(J.toggleBlockType(l,e)),[Ne]:e=>{f[e]()}};return{editorRef:r,editorState:l,computedPosForMentionSuggestions:c,focusedForEditing:i,getFileInputProps:()=>({ref:p,onChange:m}),generateLink:async t=>e.linkGeneratorFn&&"function"==typeof e.linkGeneratorFn?e.linkGeneratorFn(t):null,handleDroppedFiles:(e,t)=>h(t),handlePastedFiles:e=>h(e),handleEditorStateChange:g,handleKeyCommand:(e,t)=>{let n=J.handleKeyCommand(t,e);return n?(g(n),"handled"):"not-handled"},handleToolClick:(e,t)=>(t.preventDefault(),l.getSelection().getHasFocus()&&null!=e&&e.element?void y[e.element](e.style):null),forceFocusEditorEnd:e=>{var t;(null==e?void 0:e.preventDefault)&&e.preventDefault(),null==(t=r.current.editor)||t.focus(),g(G.moveFocusToEnd(l))},updateComputedPosForMentionSuggestions:e=>d(e),handleMentionSelect:(e,t,n,r)=>{let o=V.createEmpty(t),a=e.createEntity(we,"IMMUTABLE",Q({},r)),i=a.getLastCreatedEntityKey();a=_.replaceText(e,o.merge({anchorOffset:n.start,focusOffset:n.end}),r.mention,l.getCurrentInlineStyle(),i),g(G.forceSelection(G.moveFocusToEnd(G.set(l,{currentContent:a})),a.getSelectionAfter()))},activateEditor:()=>s(!0),deactivateEditor:()=>s(!1)}}({handleUpload:l.handleUpload||async function(){},linkGeneratorFn:l.linkGeneratorFn,onDataStructureChange:l.onDataStructureChange||function(){},value:l.value||null}),i=Q({},(ee(o),o));/*#__PURE__*/return j(ze.Provider,{value:Q({},i,{mentionSuggestions:l.mentionSuggestions||[]}),children:r})};function Me(e){var t;return e.src||e.link?/*#__PURE__*/j("img",{src:e.src||e.link,alt:e.alt||(null==(t=e.storageInfo)?void 0:t.Key)||"...",className:"unselectable"}):null}function Be(){/*#__PURE__*/return j("hr",{})}function Ue({}){/*#__PURE__*/return j(e.Fragment,{})}const Ke=["editorRef","onResizeEnd","reference","currentSize"],_e=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100];function Ge(t){var n,r;let{editorRef:l,onResizeEnd:o,reference:a="left",currentSize:i=10}=t,s=te(t,Ke),[c,d]=e.useState(!1),[p,u]=e.useState(i);const g=null==(n=l.current)||null==(r=n.editor)?void 0:r.getBoundingClientRect();let h=e.useCallback(e=>{e.preventDefault();const t=e=>{let t=[..._e];d(!0);let n="center"===a?g.width/2:g.width,r=parseInt(Math.abs(e.clientX-("center"===a?g.left+g.width/2:"end"===a?g.left+g.width:g.left))),l=parseInt(r/n*100);t.sort((e,t)=>Math.abs(l-e)-Math.abs(l-t));let i=t[0];u(i),o&&o({partition:i});let c=s.block.getEntityAt(0);s.contentState.mergeEntityData(c,{size:i})},n=()=>{d(!1),document.removeEventListener("mousemove",t,!1),document.removeEventListener("mouseup",n,!1)};document.addEventListener("mousemove",t,!1),document.addEventListener("mouseup",n,!1)},[o]);/*#__PURE__*/return L(R,{children:[/*#__PURE__*/j("div",{className:"d-inline-block p-2 unselectable",style:{cursor:"col-resize"},onMouseDown:h,children:/*#__PURE__*/j("div",{className:"bg-primary rounded resize-bar"})}),c&&/*#__PURE__*/j("div",{className:"resize-guides-container position-absolute ",children:_e.map(e=>(parseInt(window.getComputedStyle(document.querySelector(".draft-editor-container"),null).getPropertyValue("padding-left")),{percentage:e,pixels:Math.ceil(g.width*e/100)})).map(e=>/*#__PURE__*/j("div",{className:F("resize-guide position-absolute rounded",{"bg-info":"start"===a&&e.percentage===p||"end"===a&&100-e.percentage===p}),style:{left:e.pixels}},e.pixels))})]})}const qe=["editorRef","onAlignmentChange"],He=[{label:"Align left",style:Ie,icon:"fa-solid fa-align-left"},{label:"Align center",style:"center",icon:"fa-solid fa-align-justify"},{label:"Align right",style:"end",icon:"fa-solid fa-align-right"}];function $e(e){let{onAlignmentChange:t}=e,n=te(e,qe),r=l(({alignment:e})=>{t&&t({alignment:e});let r=n.block.getEntityAt(0);n.contentState.mergeEntityData(r,{alignment:e})},[t]);/*#__PURE__*/return j("div",{className:"d-inline-block shadow-md rounded mb-1",children:He.map(e=>/*#__PURE__*/j(s,{title:null==e?void 0:e.label,type:"button",className:F("btn btn-icon m-0 text-muted",{}),onClick:t=>r({alignment:null==e?void 0:e.style}),children:e.icon?/*#__PURE__*/j("i",{className:e.icon}):null==e?void 0:e.label},null==e?void 0:e.style))})}const Ye=["children"];function Je(t){let{children:n}=t,r=te(t,Ye),[l,o]=e.useState(!1),[a,i]=e.useState(r.size||30),[s,c]=e.useState(r.alignment||Ie),d=()=>({"justify-content-start":"start"===s,"justify-content-center":"center"===s,"justify-content-end":"end"===s});/*#__PURE__*/return L(R,{children:[l&&s&&/*#__PURE__*/j("div",{className:F("d-flex",d()),children:/*#__PURE__*/j($e,Q({onAlignmentChange:e=>c(e.alignment)},r))}),/*#__PURE__*/L("div",{className:F("d-flex align-items-center position-relative",d()),children:[l&&"start"!==s&&/*#__PURE__*/j(Ge,Q({},r,{reference:s,onResizeEnd:e=>i(e.partition)})),/*#__PURE__*/j("div",{className:F("d-inline-block rounded resize-container unselectable",{"resize-focused":l,"w-10":10===a,"w-15":15===a,"w-20":20===a,"w-25":25===a,"w-30":30===a,"w-35":35===a,"w-40":40===a,"w-45":45===a,"w-50":50===a,"w-55":55===a,"w-60":60===a,"w-65":65===a,"w-70":70===a,"w-75":75===a,"w-80":80===a,"w-85":85===a,"w-90":90===a,"w-95":95===a,"w-100":100===a}),onClick:()=>o(e=>!e),children:n}),l&&"end"!==s&&/*#__PURE__*/j(Ge,Q({},r,{reference:s,currentSize:a,onResizeEnd:e=>i(e.partition)}))]})]})}const Ve=["type","data","editorControllers"];function We(e){let{type:t,data:n,editorControllers:r}=e,l=null,o=Q({},n,r,te(e,Ve));return t===Se&&(l=/*#__PURE__*/j(Je,Q({},o,{children:/*#__PURE__*/j(Me,Q({},n))}))),t===Ce&&(l=/*#__PURE__*/j(Be,Q({},n))),t===Ee&&(l=/*#__PURE__*/j(Ue,Q({},n))),l}const Ze=["generateLink"],Xe=e=>"atomic"===e.getType()?{component:Qe,editable:!1}:null,Qe=t=>{const n=t.block.getEntityAt(0),r=n&&t.contentState.getEntity(n),l=null==r?void 0:r.getType(),a=o(ze),{generateLink:i}=a,s=te(a,Ze);let c=function(t){let[n,r]=e.useState(t.src);return e.useEffect(()=>(async function(){if(!t.src)try{if(!t.generateLink||"function"!=typeof t.generateLink)throw Error("link gnerator function must be supplied");let e=await t.generateLink(t.storageInfo);if(!e)throw new Error("link generator function must return a valid link or else provide a valid  image source");r(e)}catch(e){r(X),console.log(e)}}(),()=>{}),[t.generateLink]),{link:n}}(Q({generateLink:i},null==r?void 0:r.getData()));/*#__PURE__*/return j(We,Q({type:l,data:Q({},null==r?void 0:r.getData(),c),editorControllers:Q({},s)},t))},et=["readOnly"];function tt(t){let{readOnly:n=!1}=t,r=te(t,et);const{editorRef:l,editorState:o,handleEditorStateChange:a,handleDroppedFiles:i,handlePastedFiles:s,handleKeyCommand:c,activateEditor:d,deactivateEditor:p}=e.useContext(ze);/*#__PURE__*/return j(R,{children:/*#__PURE__*/j(Z,{ref:l,blockRendererFn:Xe,placeholder:r.placeholder,onChange:a,editorState:o,spellCheck:!0,handleKeyCommand:c,handleDroppedFiles:i,handlePastedFiles:s,readOnly:n,onFocus:d,onBlur:p})})}const nt={INLINE_TYPES:[{label:"Underline",style:"UNDERLINE",icon:"fa-solid fa-underline",element:ve},{label:"Bold",style:"BOLD",icon:"fa-solid fa-bold",element:ve},{label:"Italic",style:"ITALIC",icon:"fa-solid fa-italic",element:ve},{label:"Strike through",style:"STRIKETHROUGH",icon:"fa-solid fa-strikethrough",element:ve}],BLOCK_TYPES:[{label:"Header",style:"header-three",icon:"fa-solid fa-heading",element:Te},{label:"UL",style:"unordered-list-item",icon:"fa-solid fa-list",element:Te},{label:"OL",style:"ordered-list-item",icon:"fa-solid fa-list-ol",element:Te},{label:"Blockquote",style:"blockquote",icon:"fa-solid fa-quote-left",element:Te},{label:"Code block",style:"code-block",icon:"fa-solid fa-code",element:Te}],ENTITY_TYPES:[{label:"Image",style:Se,icon:"fa-solid fa-images",element:Ne},{label:"Divider",style:Ce,icon:"fa-solid fa-minus",element:Ne}]};function rt(e){/*#__PURE__*/return j("span",{className:"draft-toolbar-button-separator",children:"|"})}const lt=/*#__PURE__*/e.forwardRef((e,t)=>/*#__PURE__*/j("input",Q({},e,{ref:t,className:"d-none",type:"file",accept:e.accept||"image/*"})));function ot(t){const{getFileInputProps:n,editorState:r,handleToolClick:l}=e.useContext(ze);/*#__PURE__*/return L(R,{children:[/*#__PURE__*/j(lt,Q({},n())),Object.keys(nt).map((t,n)=>{var o;/*#__PURE__*/return L(e.Fragment,{children:[null==(o=nt[t])?void 0:o.map(e=>/*#__PURE__*/j(s,{title:null==e?void 0:e.label,type:"button",className:"btn btn-icon text-muted m-0",onMouseDown:t=>l(e,t),children:e.icon?/*#__PURE__*/j("i",{className:F(e.icon,{"text-primary":r.getCurrentInlineStyle().has(null==e?void 0:e.style)||(null==r?void 0:r.getCurrentContent().getBlockForKey(null==r?void 0:r.getSelection().getStartKey()).getType())===(null==e?void 0:e.style)})}):null==e?void 0:e.label},null==e?void 0:e.style)),n<Object.keys(nt).length-1&&/*#__PURE__*/j(rt,{})]},t)})]})}function at(t){const{forceFocusEditorEnd:n,focusedForEditing:r}=e.useContext(ze);/*#__PURE__*/return L("div",{className:F("draft-editor-container d-flex flex-column",{"editor-disabled":t.readOnly,"editor-active":r}),children:[!t.readOnly&&/*#__PURE__*/L("div",{children:[/*#__PURE__*/j(ot,Q({},t)),/*#__PURE__*/j("hr",{})]}),/*#__PURE__*/j(tt,Q({},t)),/*#__PURE__*/j("div",{className:"flex-grow-1",onMouseDown:n})]})}function it(e){/*#__PURE__*/return j(Ae,Q({},e,{children:/*#__PURE__*/j(at,Q({},e))}))}it.propTypes={value:i.string,linkGeneratorFn:i.func,handleUpload:i.func};const st=["children","separated"];Object.assign({separated:!1},S.prototype.props);const ct=e=>{let{children:t,separated:n}=e,r=te(e,st);/*#__PURE__*/return j(S,Q({className:F(r.className,{"pagination-separated":n})},r,{children:t}))};ct.propTypes=Q({separated:i.bool},S.propTypes&&S.propTypes);const dt=["children"];Object.assign({},C.prototype.props);const pt=e=>{let{children:t}=e,n=te(e,dt);/*#__PURE__*/return j(C,Q({},n,{children:t}))};pt.propTypes=Q({},C.propTypes&&C.propTypes);const ut=["children","link"];Object.assign({},k.prototype.props);const gt=e=>{let{children:t,link:n}=e,r=te(e,ut);return n?/*#__PURE__*/j("span",{className:"page-link",children:t}):/*#__PURE__*/j(k,Q({},r,{children:t}))};gt.propTypes=Q({},k.propTypes&&k.propTypes);const ht=["children"];Object.assign({},mt.prototype.props);const mt=e=>{let{children:t}=e,n=te(e,ht);/*#__PURE__*/return j(w,Q({},n,{children:t}))};mt.propTypes=Q({},w.propTypes&&w.propTypes);const ft=["children"];Object.assign({},E.prototype.props);const yt=e=>{let{children:t}=e,n=te(e,ft);/*#__PURE__*/return j(E,Q({},n,{children:t}))};yt.propTypes=Q({},E.propTypes&&E.propTypes);const bt=["children"];Object.assign({},I.prototype.props);const vt=e=>{let{children:t}=e,n=te(e,bt);/*#__PURE__*/return j(I,Q({},n,{children:t}))};vt.propTypes=Q({},I.propTypes&&I.propTypes);const Tt=["children"];Object.assign({},x.prototype.props);const Nt=e=>{let{children:t}=e,n=te(e,Tt);/*#__PURE__*/return j(x,Q({},n,{children:t}))};Nt.propTypes=Q({},x.propTypes&&x.propTypes);const St=["children"];Object.assign({},P.prototype.props);const Ct=e=>{let{children:t}=e,n=te(e,St);/*#__PURE__*/return j(P,Q({},n,{children:t}))};Ct.propTypes=Q({},P.propTypes&&P.propTypes);const kt=["children"];Object.assign({},O.prototype.props);const wt=e=>{let{children:t}=e,n=te(e,kt);/*#__PURE__*/return j(O,Q({},n,{children:t}))};wt.propTypes=Q({},O.propTypes&&O.propTypes);export{be as AdvancedTable,ne as Button,re as Card,le as CardBody,oe as CardFooter,ae as CardHeader,ie as Dropdown,ue as DropdownItem,de as DropdownMenu,ce as DropdownToggle,mt as ListBase,yt as ListGroupItem,vt as ListGroupItemHeading,Nt as ListGroupItemText,ct as Pagination,pt as PaginationItem,gt as PaginationLink,ge as SimpleTable,Ct as TabContent,wt as TabPane,it as TextEditor};
//# sourceMappingURL=ims-ui-kit.modern.mjs.map
